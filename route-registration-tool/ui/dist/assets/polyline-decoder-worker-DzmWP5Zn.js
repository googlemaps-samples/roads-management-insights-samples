function t(t){if(!t)return{type:"LineString",coordinates:[]};try{try{const e=JSON.parse(t);if(Array.isArray(e)&&e.length>0&&Array.isArray(e[0])&&2===e[0].length){const t=e[0],n=t[0],r=t[1],o=Math.abs(n)<=90&&Math.abs(r)<=180,a=Math.abs(n)<=180&&Math.abs(r)<=90;if(o&&!a){return{type:"LineString",coordinates:e.map(t=>[t[1],t[0]])}}return{type:"LineString",coordinates:e}}}catch{}const e=function(t,e){void 0===e&&(e=5);for(var n=Math.pow(10,e),r=t.length,o=new Array(Math.floor(t.length/2)),a=0,s=0,i=0,c=0;a<r;++c){var d=1,h=0,y=void 0;do{d+=(y=t.charCodeAt(a++)-63-1)<<h,h+=5}while(y>=31);s+=1&d?~(d>>1):d>>1,d=1,h=0;do{d+=(y=t.charCodeAt(a++)-63-1)<<h,h+=5}while(y>=31);i+=1&d?~(d>>1):d>>1,o[c]=[s/n,i/n]}return o.length=c,o}(t);if(0===e.length)return{type:"LineString",coordinates:[]};return{type:"LineString",coordinates:e.map(t=>{const[e,n]=t;return Math.abs(e)>90||Math.abs(n),[n,e]})}}catch(e){return{type:"LineString",coordinates:[]}}}self.onmessage=e=>{const{type:n,payload:r}=e.data;if("DECODE_POLYLINES"===n)try{const{polylines:e}=r,n=[];for(const{key:r,encoded:s}of e)try{const e=t(s);e.coordinates&&e.coordinates.length>=2&&n.push([r,e.coordinates])}catch(o){}const a={type:"POLYLINES_DECODED",payload:{decoded:n}};self.postMessage(a)}catch(o){const t={type:"ERROR",payload:{error:o.message||"Unknown error decoding polylines"}};self.postMessage(t)}};
